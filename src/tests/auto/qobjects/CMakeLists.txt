cmake_minimum_required(VERSION 3.16)

enable_testing(true)
include_directories( test )

set(CMAKE_AUTOMOC ON)
set(CMAKE_AUTOUIC ON)

set(QT_REQUIRED_VERSION "6.3.0")
find_package(Qt6 ${QT_REQUIRED_VERSION} CONFIG REQUIRED COMPONENTS Test Core Widgets RemoteObjects)


set(root_dir ${PROJECT_SOURCE_DIR}/src)

set(project_UI
${root_dir}/libraries/diceparser/src/bin/gui/mainwindow.ui
${root_dir}/libraries/rwidgets/customs/playerwidget.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/findtoolbar.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/firstrundialog.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/finddialog.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/announcedocumentdialog.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/sharednote.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/connecttodocument.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/document.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/preferencesdialog.ui
${root_dir}/libraries/rwidgets/editors/sharededitor/participantspane.ui
${root_dir}/libraries/rwidgets/mediacontainers/pdfviewer.ui
${root_dir}/libraries/rwidgets/mediacontainers/charactersheetwindow.ui
${root_dir}/libraries/rwidgets/mediacontainers/instantmessagingview.ui
${root_dir}/libraries/rwidgets/mediacontainers/webview.ui
${root_dir}/libraries/rwidgets/docks/antagonistboard.ui
${root_dir}/libraries/rwidgets/docks/playerspanel.ui
${root_dir}/libraries/rwidgets/docks/campaigndock.ui
${root_dir}/libraries/rwidgets/docks/notificationzone.ui
${root_dir}/libraries/rwidgets/docks/channellistpanel.ui
${root_dir}/libraries/rwidgets/dialogs/keygeneratordialog.ui
${root_dir}/libraries/rwidgets/dialogs/connectionretrydialog.ui
${root_dir}/libraries/rwidgets/dialogs/importdatafromcampaigndialog.ui
${root_dir}/libraries/rwidgets/dialogs/shortcuteditordialog.ui
${root_dir}/libraries/rwidgets/dialogs/tipofdayviewer.ui
${root_dir}/libraries/rwidgets/dialogs/historyviewerdialog.ui
${root_dir}/libraries/rwidgets/dialogs/aboutrolisteam.ui
${root_dir}/libraries/rwidgets/dialogs/persondialog.ui
${root_dir}/libraries/rwidgets/dialogs/selectconnectionprofiledialog.ui
${root_dir}/libraries/rwidgets/dialogs/campaignintegritydialog.ui
${root_dir}/libraries/rwidgets/dialogs/newfiledialog.ui
${root_dir}/libraries/rwidgets/dialogs/campaignproperties.ui
${root_dir}/libraries/rwidgets/dialogs/vmapwizzarddialog.ui
${root_dir}/libraries/rwidgets/dialogs/imageselectordialog.ui
${root_dir}/libraries/rwidgets/dialogs/preferencesdialogbox.ui
${root_dir}/libraries/rwidgets/gmtoolbox/NameGenerator/namegeneratorwidget.ui
${root_dir}/libraries/rwidgets/gmtoolbox/DiceBookMark/dicebookmarkwidget.ui
${root_dir}/libraries/rwidgets/gmtoolbox/UnitConvertor/convertor.ui
${root_dir}/libraries/common/widgets/logpanel.ui
${root_dir}/binaries/widget/mainwindow.ui
${root_dir}/binaries/rcse/preferences/preferencesdialog.ui
${root_dir}/binaries/rcse/mainwindow_rcse.ui
${root_dir}/binaries/rcse/widgets/codeedit.ui
${root_dir}/binaries/rcse/dialog/sheetproperties.ui
${root_dir}/binaries/rcse/dialog/pdfmanager.ui
${root_dir}/binaries/rcse/dialog/columndefinitiondialog.ui
${root_dir}/binaries/rcse/dialog/codeeditordialog.ui
${root_dir}/binaries/rcse/dialog/aboutrcse.ui)

#${root_dir}/libraries/rwidgets/editors/mrichtextedit.ui

set(project_SRC
${root_dir}/binaries/mindmap/maincontroller.cpp
${root_dir}/binaries/mindmap/maincontroller.h
${root_dir}/binaries/rcse/borderlisteditor.cpp
${root_dir}/binaries/rcse/borderlisteditor.h
${root_dir}/binaries/rcse/controllers/integritycontroller.h
${root_dir}/binaries/rcse/controllers/integritycontroller.cpp
${root_dir}/binaries/rcse/canvas.cpp
${root_dir}/binaries/rcse/canvas.h
${root_dir}/binaries/rcse/canvasfield.cpp
${root_dir}/binaries/rcse/canvasfield.h
${root_dir}/binaries/rcse/codeeditor.cpp
${root_dir}/binaries/rcse/codeeditor.h
${root_dir}/binaries/rcse/controllers/charactercontroller.cpp
${root_dir}/binaries/rcse/controllers/charactercontroller.h
${root_dir}/binaries/rcse/controllers/editorcontroller.cpp
${root_dir}/binaries/rcse/controllers/editorcontroller.h
${root_dir}/binaries/rcse/controllers/imagecontroller.cpp
${root_dir}/binaries/rcse/controllers/imagecontroller.h
${root_dir}/binaries/rcse/controllers/maincontroller.cpp
${root_dir}/binaries/rcse/controllers/maincontroller.h
${root_dir}/binaries/rcse/controllers/qmlgeneratorcontroller.cpp
${root_dir}/binaries/rcse/controllers/qmlgeneratorcontroller.h
${root_dir}/binaries/rcse/controllers/rcseapplicationcontroller.cpp
${root_dir}/binaries/rcse/controllers/rcseapplicationcontroller.h
${root_dir}/binaries/rcse/data/characterlist.cpp
${root_dir}/binaries/rcse/data/characterlist.h
${root_dir}/binaries/rcse/data/mockcharacter.cpp
${root_dir}/binaries/rcse/data/mockcharacter.h
${root_dir}/binaries/rcse/delegate/alignmentdelegate.cpp
${root_dir}/binaries/rcse/delegate/alignmentdelegate.h
${root_dir}/binaries/rcse/delegate/fontdelegate.cpp
${root_dir}/binaries/rcse/delegate/fontdelegate.h
${root_dir}/binaries/rcse/delegate/pagedelegate.cpp
${root_dir}/binaries/rcse/delegate/pagedelegate.h
${root_dir}/binaries/rcse/delegate/typedelegate.cpp
${root_dir}/binaries/rcse/delegate/typedelegate.h
${root_dir}/binaries/rcse/dialog/aboutrcse.cpp
${root_dir}/binaries/rcse/dialog/aboutrcse.h
${root_dir}/binaries/rcse/dialog/codeeditordialog.cpp
${root_dir}/binaries/rcse/dialog/codeeditordialog.h
${root_dir}/binaries/rcse/dialog/columndefinitiondialog.cpp
${root_dir}/binaries/rcse/dialog/columndefinitiondialog.h
${root_dir}/binaries/rcse/dialog/pdfmanager.cpp
${root_dir}/binaries/rcse/dialog/pdfmanager.h
${root_dir}/binaries/rcse/dialog/sheetproperties.cpp
${root_dir}/binaries/rcse/dialog/sheetproperties.h
${root_dir}/binaries/rcse/fieldmodel.cpp
${root_dir}/binaries/rcse/fieldmodel.h
${root_dir}/binaries/rcse/itemeditor.cpp
${root_dir}/binaries/rcse/itemeditor.h
${root_dir}/binaries/rcse/mainwindow.cpp
${root_dir}/binaries/rcse/mainwindow.h
${root_dir}/binaries/rcse/preferences/preferencesdialog.cpp
${root_dir}/binaries/rcse/preferences/preferencesdialog.h
${root_dir}/binaries/rcse/preferences/rcsepreferencesmanager.cpp
${root_dir}/binaries/rcse/preferences/rcsepreferencesmanager.h
${root_dir}/binaries/rcse/qmlgeneratorvisitor.cpp
${root_dir}/binaries/rcse/qmlgeneratorvisitor.h
${root_dir}/binaries/rcse/qmlhighlighter.cpp
${root_dir}/binaries/rcse/qmlhighlighter.h
${root_dir}/binaries/rcse/qmltypesregister.cpp
${root_dir}/binaries/rcse/qmltypesregister.h
${root_dir}/binaries/rcse/serializerhelper.cpp
${root_dir}/binaries/rcse/serializerhelper.h
${root_dir}/binaries/rcse/tablecanvasfield.cpp
${root_dir}/binaries/rcse/tablecanvasfield.h
${root_dir}/binaries/rcse/undo/addcharactercommand.cpp
${root_dir}/binaries/rcse/undo/addcharactercommand.h
${root_dir}/binaries/rcse/undo/addfieldcommand.cpp
${root_dir}/binaries/rcse/undo/addfieldcommand.h
${root_dir}/binaries/rcse/undo/addpagecommand.cpp
${root_dir}/binaries/rcse/undo/addpagecommand.h
${root_dir}/binaries/rcse/undo/deletecharactercommand.cpp
${root_dir}/binaries/rcse/undo/deletecharactercommand.h
${root_dir}/binaries/rcse/undo/deletefieldcommand.cpp
${root_dir}/binaries/rcse/undo/deletefieldcommand.h
${root_dir}/binaries/rcse/undo/deletepagecommand.cpp
${root_dir}/binaries/rcse/undo/deletepagecommand.h
${root_dir}/binaries/rcse/undo/movefieldcommand.cpp
${root_dir}/binaries/rcse/undo/movefieldcommand.h
${root_dir}/binaries/rcse/undo/setbackgroundimage.cpp
${root_dir}/binaries/rcse/undo/setbackgroundimage.h
${root_dir}/binaries/rcse/undo/setfieldproperties.cpp
${root_dir}/binaries/rcse/undo/setfieldproperties.h
${root_dir}/binaries/rcse/undo/setpropertyonallcharacters.cpp
${root_dir}/binaries/rcse/undo/setpropertyonallcharacters.h
${root_dir}/binaries/rcse/widgets/codeedit.cpp
${root_dir}/binaries/rcse/widgets/codeedit.h
${root_dir}/binaries/rcse/widgets/fieldview.cpp
${root_dir}/binaries/rcse/widgets/fieldview.h
${root_dir}/binaries/server/rolisteamdaemon.cpp
${root_dir}/binaries/server/rolisteamdaemon.h
${root_dir}/binaries/widget/mainwindow.cpp
${root_dir}/binaries/widget/mainwindow.h
${root_dir}/binaries/widget/rolisteamapplication.cpp
${root_dir}/binaries/widget/rolisteamapplication.h
${root_dir}/binaries/widget/uiwatchdog.h
${root_dir}/libraries/core/include/preferences/preferencesmanager.h
${root_dir}/libraries/core/src/preferences/preferencesmanager.cpp
${root_dir}/libraries/core/include/preferences/preferenceslistener.h
${root_dir}/libraries/core/src/preferences/preferenceslistener.cpp
 )


add_executable(tst_qobjects tst_qobjects.cpp ${project_SRC} ${project_UI} ../assets/resources.qrc)

qt_add_repc_replicas(tst_qobjects
    ${CMAKE_SOURCE_DIR}/src/binaries/widget/maincontrollersource.rep
)

target_include_directories(tst_qobjects PRIVATE ${CMAKE_BINARY_DIR} ${CMAKE_CURRENT_BINARY_DIR} ${root_dir}/libraries/rwidgets/dialogs
${root_dir}/libraries/rwidgets/mediacontainers
${root_dir}/libraries/core/include/controller/item_controllers
${root_dir}/libraries/utils/include/utils
${root_dir}/libraries/rwidgets/docks
${root_dir}/libraries/rwidgets/graphicsItems
${root_dir}/libraries/core/include/data
${root_dir}/libraries/core/include/session
${root_dir}/libraries/core/include/controller
${root_dir}/binaries/mindmap
${root_dir}/libraries/qml_views/include/qml_views
${root_dir}/libraries/common/include/common
${root_dir}/binaries/rcse/controllers
${root_dir}/libraries/core/include/updater/vmapitem
${root_dir}/libraries/mindmap/include/mindmap/controller
${root_dir}/libraries/rwidgets/customs
${root_dir}/libraries/core/include/controller/media_controller
${root_dir}/libraries/charactersheet/include/charactersheet/controllers
${root_dir}/libraries/core/include/network
${root_dir}/libraries/charactersheet/include/charactersheet
${root_dir}/libraries/core/include/controller/view_controller
${root_dir}/libraries/rwidgets/modelviews
${root_dir}/libraries/rwidgets/gmtoolbox/UnitConvertor
${root_dir}/binaries
${root_dir}/binaries/rcse
${root_dir}/binaries/server
${root_dir}/binaries/rcse/data
${root_dir}/libraries/mindmap/include/mindmap/data
${root_dir}/binaries/rcse/dialog
${root_dir}/libraries/instantmessaging/include/instantmessaging
${root_dir}/libraries/core/include/updater/media
${root_dir}/libraries/core/include/model
${root_dir}/libraries/diceparser/src/bin/webserver
${root_dir}/libraries/core/include/network/upnp
${root_dir}/libraries/mindmap/include/mindmap/worker
${root_dir}/libraries/diceparser/src/libparser/include/diceparser_qobject
${root_dir}/libraries/mindmap/include/mindmap/model
${root_dir}/binaries/widget
${root_dir}/libraries/core/include/services
${root_dir}/libraries/rwidgets/editors
${root_dir}/binaries/rcse/widgets
${root_dir}/libraries/mindmap/include/mindmap/qmlItems
${root_dir}/libraries/rwidgets/editors/noteeditor/format_OO_oasis_
${root_dir}/libraries/rwidgets/delegates
${root_dir}/libraries/rwidgets/editors/noteeditor/src
${root_dir}/libraries/common/include/common_qml
${root_dir}/libraries/mindmap/include/mindmap/command
${root_dir}/libraries/core/include/utils
${root_dir}/libraries/common/include/common_widgets
${root_dir}/libraries/core/include/updater/controller
${root_dir}/libraries/core/include/preferences
${root_dir}/libraries/core/include
${root_dir}/libraries/rwidgets/gmtoolbox/NameGenerator
${root_dir}/binaries/rcse/preferences
${root_dir}/libraries/rwidgets/gmtoolbox/DiceBookMark
${root_dir}/libraries/diceparser/src/bin/gui
${root_dir}/libraries/diceparser/src/bin/mobile
${root_dir}/libraries/core/include/worker
${root_dir}/libraries/charactersheet/include/charactersheet_widgets
${root_dir}/binaries/rcse/delegate
${root_dir}/libraries/rwidgets/toolbars)

#${root_dir}/libraries/rwidgets/editors/sharededitor

target_link_libraries(tst_qobjects
    PUBLIC
        Qt6::Core
        Qt6::Test
        Qt6::Widgets
        Qt6::RemoteObjects
    PRIVATE
        core
        rwidgets
        diceparser_qobject
        diceparser_shared
        instantmessaging
        rmindmap
        common_core
        common_widget
        common_qml
        helper
        utils
        network
        charactersheet
        charactersheet_formula
        charactersheet_widgets
        qml_components
        dice3d
        inja
        qml_views)

target_include_directories(tst_qobjects PUBLIC ../helper)
add_test(NAME tst_qobjects COMMAND tst_qobjects)
